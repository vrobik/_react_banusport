(this.webpackJsonpreact_banusport=this.webpackJsonpreact_banusport||[]).push([[5],{588:function(e,t){},711:function(e,t){},713:function(e,t){},722:function(e,t){},724:function(e,t){},750:function(e,t){},752:function(e,t){},753:function(e,t){},759:function(e,t){},761:function(e,t){},779:function(e,t){},782:function(e,t){},798:function(e,t){},801:function(e,t){},836:function(e,t){},838:function(e,t){},931:function(e,t,n){"use strict";n.r(t);var a=n(926),c=n(924),r=n(493),o=n.n(r),l=n(708),i=n(925),u=n(2),s=n.n(u),m=n(18),p=n(510),b=n(709),f=n.n(b),d=n(827);t.default=function(){var e=0,t=0,n=localStorage.getItem("pass"),r=Object(m.g)(),b=Object(u.useState)(!1),E=Object(i.a)(b,2),h=E[0],O=E[1],j=Object(u.useState)([]),k=Object(i.a)(j,2),g=k[0],y=k[1],v=Object(u.useState)([]),w=Object(i.a)(v,2),C=w[0],S=w[1],_=Object(u.useState)([]),P=Object(i.a)(_,2),N=P[0],z=P[1],I=Object(u.useState)([]),x=Object(i.a)(I,2),T=x[0],A=x[1],R=Object(u.useState)({}),D=Object(i.a)(R,2),M=D[0],G=D[1],B=Object(u.useState)([]),F=Object(i.a)(B,2),H=F[0],L=F[1],J=Object(u.useState)([]),K=Object(i.a)(J,2),W=K[0],U=K[1],V=Object(u.useState)(10),Y=Object(i.a)(V,2),q=Y[0],Z=Y[1],$=Object(u.useState)([]),Q=Object(i.a)($,2),X=Q[0],ee=Q[1],te=Object({NODE_ENV:"production",PUBLIC_URL:"/_react_banusport",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}),ne=te.REACT_APP_GOOGLESHEET_ID,ae=te.REACT_APP_CLIENT_EMAIL,ce=te.REACT_APP_PRIVATE_KEY,re=te.REACT_APP_SHEET_ID,oe=new d.GoogleSpreadsheet(ne),le=function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,oe.useServiceAccountAuth({client_email:ae,private_key:ce});case 3:return e.next=5,oe.loadInfo();case 5:return t=oe.sheetsById[re],e.next=8,t.getRows();case 8:return e.abrupt("return",e.sent);case 11:e.prev=11,e.t0=e.catch(0),console.error("Error: ",e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();0===W.length&&le().then((function(e){L(e),U(Object.keys(e).map((function(t,n){return{id:e[t].phone,idRow:n,name:e[t].name,phone:e[t].phone,photo:e[t].photo,note:e[t].note,pozitiile:e[t].pozitiile}})))}));var ie=Object(m.h)().search.match(/page=([0-9]+)/,""),ue=Number(ie&&ie[1]?ie[1]:1),se=Math.ceil(W.length/q),me=Object(u.useState)(ue),pe=Object(i.a)(me,2),be=pe[0],fe=pe[1],de=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";ee([].concat(Object(c.a)(X),[{position:"top-right",autohide:"errors"===e?3e3:1e3,closeButton:!0,fade:!0,type:e,content:t}]))},Ee=X.reduce((function(e,t){return e[t.position]=e[t.position]||[],e[t.position].push(t),e}),{}),he=function(n){if(N.length<12)de("low");else{var a={},r=[],o=[];if("undefined"===typeof n||"position"===n){var l={1:[],2:[],3:[],4:[]},i={1:[],2:[],3:[],4:[]},u={1:[],2:[],3:[],4:[]},s={1:[],2:[],3:[],4:[]};W.forEach((function(e){if(N.includes(e.id)){a[e.id]=e;var t=e.pozitiile.split(".");switch(t[0]){case"1":l[1]=[].concat(Object(c.a)(l[1]),[e]);break;case"2":i[1]=[].concat(Object(c.a)(i[1]),[e]);break;case"3":u[1]=[].concat(Object(c.a)(u[1]),[e]);break;case"4":s[1]=[].concat(Object(c.a)(s[1]),[e])}switch(t[1]){case"1":l[2]=[].concat(Object(c.a)(l[2]),[e]);break;case"2":i[2]=[].concat(Object(c.a)(i[2]),[e]);break;case"3":u[2]=[].concat(Object(c.a)(u[2]),[e]);break;case"4":s[2]=[].concat(Object(c.a)(s[2]),[e])}switch(t[2]){case"1":l[3]=[].concat(Object(c.a)(l[3]),[e]);break;case"2":i[3]=[].concat(Object(c.a)(i[3]),[e]);break;case"3":u[3]=[].concat(Object(c.a)(u[3]),[e]);break;case"4":s[3]=[].concat(Object(c.a)(s[3]),[e])}switch(t[3]){case"1":l[4]=[].concat(Object(c.a)(l[4]),[e]);break;case"2":i[4]=[].concat(Object(c.a)(i[4]),[e]);break;case"3":u[4]=[].concat(Object(c.a)(u[4]),[e]);break;case"4":s[4]=[].concat(Object(c.a)(s[4]),[e])}}})),Object.keys(l).map((function(e){return l[e].sort((function(e,t){return parseInt(t.note,10)-parseInt(e.note,10)}))})),Object.keys(i).map((function(e){return i[e].sort((function(e,t){return parseInt(t.note,10)-parseInt(e.note,10)}))})),Object.keys(u).map((function(e){return u[e].sort((function(e,t){return parseInt(t.note,10)-parseInt(e.note,10)}))})),Object.keys(s).map((function(e){return s[e].sort((function(e,t){return parseInt(t.note,10)-parseInt(e.note,10)}))})),r=[].concat(Object(c.a)(l[1].filter((function(e,t){return t%2===0}))),Object(c.a)(i[1].filter((function(e,t){return t%2===0}))),Object(c.a)(u[1].filter((function(e,t){return t%2===0}))),Object(c.a)(s[1].filter((function(e,t){return t%2===0})))),o=[].concat(Object(c.a)(l[1].filter((function(e,t){return t%2!==0}))),Object(c.a)(i[1].filter((function(e,t){return t%2!==0}))),Object(c.a)(u[1].filter((function(e,t){return t%2!==0}))),Object(c.a)(s[1].filter((function(e,t){return t%2!==0})))),r.length!==o.length&&(o=[].concat(Object(c.a)(o),[r.slice(-1).pop()]),r.pop()),e=0,t=0}else if("top"===n){W.forEach((function(e){N.includes(e.id)&&(a[e.id]=e)})),Object.values(a).sort((function(e,t){return parseInt(t.note,10)-parseInt(e.note,10)})).forEach((function(e,t){t%2?o=[].concat(Object(c.a)(o),[e]):r=[].concat(Object(c.a)(r),[e])}))}else{var m=N.sort((function(){return.5-Math.random()}));r=m.slice(0,6),o=m.slice(6,12)}S([r,o]),O(!0)}},Oe=function(e){switch(e){case"1":return"Att";case"2":return"Mid";case"3":return"Def";case"4":return"Gk";default:return"N/A"}},je=function(){var e=Object(l.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n={},e.t0=t.data.name,e.next="note"===e.t0?4:"phone"===e.t0?6:"pozitiile"===e.t0?8:10;break;case 4:return n.note=t.data.value,e.abrupt("break",11);case 6:return n.phone=t.data.value,e.abrupt("break",11);case 8:return n.pozitiile=t.data.value,e.abrupt("break",11);case 10:return e.abrupt("break",11);case 11:G(Object(a.a)(Object(a.a)({},M),n));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ke=function(){var e={};(M.note>10||M.note<0)&&(e.nota="Nota jucatorului nu corespunde intervalului [0 ... 10]"),null===M.phone.match(/^[0-9]*$/g)&&(e.telefon="Numarul de telefon al jucatorului poate fin doar din cifre");var t=M.pozitiile.split("."),n=t.includes("1")&&t.includes("2")&&t.includes("3")&&t.includes("4");if(4===t.length&&n||(e.pozitii='Pozitiile de joc nu corespund formatului "1.2.3.4"'),Object.keys(e).length)return de("errors",e),null;H[T[0]].note=M.note,H[T[0]].phone=M.phone,H[T[0]].pozitiile=M.pozitiile,H[T[0]].save();var c=W.slice();c[T[0]]=Object(a.a)(Object(a.a)({},c[T[0]]),{},{note:M.note,phone:M.phone,pozitiile:M.pozitiile,id:M.phone,idRow:T[0]}),U(c),A([]),G({})},ge=function(e){var t=Object(i.a)(e,1)[0];if(null!==n&&"b43c25877cb11b88bcf6341b90fdccab"===f.a.MD5(n).toString())"undefined"!==typeof t?(A([t]),G(H[t])):(A([]),G({}));else{var a=prompt("Password:","");if(null===a||"b43c25877cb11b88bcf6341b90fdccab"!==f.a.MD5(a).toString())return de("pass"),null;localStorage.setItem("pass",a),"undefined"!==typeof t?(A([t]),G(H[t])):(A([]),G({}))}};return Object(u.useEffect)((function(){ue!==be&&fe(ue)}),[ue,be,W]),s.a.createElement(p.O,null,W.length?s.a.createElement(p.k,{xl:12},s.a.createElement(p.g,null,s.a.createElement(p.i,null,s.a.createElement(p.O,{className:"align-items-center"},s.a.createElement(p.k,{col:"6",xl:"4",className:"mb-3 mb-xl-0"},"Players"),s.a.createElement(p.k,{col:"6",sm:"4",md:"4",xl:"4",className:"mb-3 mb-xl-0"},s.a.createElement(p.f,null,s.a.createElement(p.e,{color:"success",onClick:function(){return de("change")}},"Players list"),s.a.createElement(p.e,{color:"danger",onClick:function(){return z([])}},"Clear list"))),s.a.createElement(p.k,{col:"6",sm:"4",md:"4",xl:"4",className:"mb-3 mb-xl-0"},s.a.createElement(p.f,null,s.a.createElement(p.e,{color:"success",onClick:function(){N.length<12||C.length<2?de("noteams"):O(!0)}},"Show teams"),s.a.createElement(p.e,{color:"danger",onClick:function(){return he()}},"Generate teams"))))),s.a.createElement(p.h,null,s.a.createElement(p.o,{items:W,fields:[{key:"switch",label:"Participa",_style:{width:"1%"},sorter:!0},{key:"name",_classes:"font-weight-bold",_style:{width:"30%"}},{key:"phone",label:"Telefon"},{key:"note",label:"Nota"},{key:"pozitiile",label:"Post"},{key:"show_details",label:"",_style:{width:"1%"},filter:!1}],tableFilter:!0,itemsPerPageSelect:{label:"Jucaroti pe pagina",values:[10,20,50]},onPaginationChange:function(e){Z(e)},hover:!0,striped:!0,itemsPerPage:q,activePage:be,scopedSlots:{switch:function(e){return s.a.createElement("td",{className:"py-2"},s.a.createElement(p.Y,{size:"sm",className:"mx-1",shape:"pill",color:"success",variant:"opposite",labelOn:"\u2713",labelOff:"\u2715",onClick:function(){return t=e.id,void(12!==N.length||N.includes(t)?(N.includes(t)?z(Object(c.a)(N.filter((function(e){return e!==t})))):z([].concat(Object(c.a)(N),[t])),de("change")):de("full"));var t},checked:N.includes(e.id),onChange:function(){}}))},pozitiile:function(e){return s.a.createElement("td",{className:"py-2"},e.pozitiile.split(".").map((function(e){return Oe(e)})).join("->"))},show_details:function(e,t){return s.a.createElement("td",{className:"py-2"},s.a.createElement(p.e,{color:"primary",variant:"outline",shape:"square",size:"sm",onClick:function(){!function(e){var t=g.indexOf(e),n=g.slice();-1!==t?n.splice(t,1):n=[].concat(Object(c.a)(g),[e]),y(n)}(t)}},g.includes(t)?"Hide":"Show"))},details:function(e,t){return s.a.createElement(p.l,{show:g.includes(t)},s.a.createElement(p.h,null,s.a.createElement(p.O,null,s.a.createElement(p.k,{lg:"8",className:"py-3"},s.a.createElement(p.D,null,s.a.createElement(p.E,null,s.a.createElement(p.F,{className:"bg-info text-white"},"Nota")),T.includes(e.idRow)?s.a.createElement(p.C,{value:M.note,name:"note",type:"number",min:0,max:10,onChange:function(t){return je({id:e.idRow,data:t.target})}}):s.a.createElement(p.C,{value:e.note,name:"note",disabled:!0})),s.a.createElement("br",null),s.a.createElement(p.D,null,s.a.createElement(p.E,null,s.a.createElement(p.F,{className:"bg-info text-white"},"Telefon")),T.includes(e.idRow)?s.a.createElement(p.C,{value:M.phone,type:"number",name:"phone",onChange:function(t){return je({id:e.idRow,data:t.target})}}):s.a.createElement(p.C,{value:e.phone,name:"phone",disabled:!0})),s.a.createElement("br",null),s.a.createElement(p.D,null,s.a.createElement(p.E,null,s.a.createElement(p.F,{className:"bg-info text-white"},"Pozitii de joc")),T.includes(e.idRow)?s.a.createElement(p.C,{value:M.pozitiile,name:"pozitiile",onChange:function(t){return je({id:e.idRow,data:t.target})}}):s.a.createElement(p.C,{value:e.pozitiile,name:"pozitiile",disabled:!0})),s.a.createElement(p.v,{className:"help-block"},"1: Att, 2: Mid, 3: Def, 4: Gk"),s.a.createElement("br",null),T.includes(e.idRow)?s.a.createElement(p.f,null,s.a.createElement(p.e,{color:"success",onClick:ke},"Update"),s.a.createElement(p.e,{color:"danger",onClick:function(){return ge([])}},"Cancel")):s.a.createElement(p.e,{color:"warning",onClick:function(){return ge([e.idRow])}},"Edit")),s.a.createElement(p.k,{md:"4",className:"py-3"},"default"===e.photo?"No Image":s.a.createElement(p.j,{src:e.photo})))))}}}),s.a.createElement(p.M,{activePage:be,onActivePageChange:function(e){ue!==e&&r.push("/players?page=".concat(e))},pages:se,align:"center"})))):"",Object.keys(Ee).map((function(e){return s.a.createElement(p.cb,{position:e,key:"toaster"+e},Ee[e].map((function(e,t){return s.a.createElement(p.Z,{key:"toast"+t,show:!0,autohide:e.autohide,fade:e.fade},s.a.createElement(p.bb,{closeButton:e.closeButton},["full","low","pass"].includes(e.type)?"Atentie!":"Jucatori"),s.a.createElement(p.ab,null,function(e){switch(e.type){case"full":return"Maximul jucatorilor este 12";case"low":return"Minimul de jucatorilor este 12";case"noteams":return"Generaza echipele!";case"pass":return"Wrong Password!!!";case"change":return Object.keys(W).map((function(e){return N.includes(W[e].id)?s.a.createElement("p",{key:W[e].id},s.a.createElement("b",null,"".concat(W[e].name))):""}));case"errors":return Object.keys(e.content).map((function(t){return s.a.createElement("p",{key:t},s.a.createElement("b",{style:{textTransform:"capitalize"}},"".concat(t),": ")," ","".concat(e.content[t]))}))}}(e)))})))})),s.a.createElement(p.H,{show:h,onClose:O},s.a.createElement(p.K,{closeButton:!0},s.a.createElement(p.L,null,"Modal title")),s.a.createElement(p.I,null,C.length<1?"No teams":s.a.createElement(p.O,null,s.a.createElement(p.k,{col:"6",className:"bg-info py-3"},C[0].map((function(t,n){return e+=parseInt(t.note,10),s.a.createElement("p",{key:t.id},"".concat(n+1,": "),s.a.createElement("b",null,"".concat(t.name))," : ",Oe(t.pozitiile.split(".")[0])," : ",t.note)})),s.a.createElement("h3",null,"Suma: ",e),s.a.createElement("h5",null,"Media: ",(e/6).toFixed(2))),s.a.createElement(p.k,{col:"6",className:"bg-warning py-3"},C[1].map((function(e,n){return t+=parseInt(e.note,10),s.a.createElement("p",{key:e.id},"".concat(n+1,": "),s.a.createElement("b",null,"".concat(e.name))," : ",Oe(e.pozitiile.split(".")[0])," : ",e.note)})),s.a.createElement("h4",null,"Suma: ",t),s.a.createElement("h5",null,"Media: ",(t/6).toFixed(2))))),s.a.createElement(p.J,null,s.a.createElement(p.f,null,s.a.createElement(p.e,{onClick:function(){return he("position")},color:"success"},"Teams by Position")," ",s.a.createElement(p.e,{onClick:function(){return he("top")},color:"danger"},"Teams by Top")),s.a.createElement(p.e,{color:"secondary",onClick:function(){return O(!1)}},"Close"))))}}}]);
//# sourceMappingURL=5.127bfde3.chunk.js.map