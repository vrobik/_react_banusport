(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[5],{588:function(e,t){},711:function(e,t){},713:function(e,t){},722:function(e,t){},724:function(e,t){},750:function(e,t){},752:function(e,t){},753:function(e,t){},759:function(e,t){},761:function(e,t){},779:function(e,t){},782:function(e,t){},798:function(e,t){},801:function(e,t){},836:function(e,t){},838:function(e,t){},932:function(e,t,n){"use strict";n.r(t);var a=n(926),c=n(924),o=n(493),r=n.n(o),l=n(708),i=n(925),u=n(2),s=n.n(u),m=n(18),p=n(510),b=n(709),f=n.n(b),d=n(827),h={type:"service_account",project_id:"banusport",private_key_id:"dc888bef213e03bac1359e2ae60b6ad35236702b",client_email:"banusportservice@banusport.iam.gserviceaccount.com",client_id:"112655483684951193239",auth_uri:"https://accounts.google.com/o/oauth2/auth",token_uri:"https://oauth2.googleapis.com/token",auth_provider_x509_cert_url:"https://www.googleapis.com/oauth2/v1/certs",client_x509_cert_url:"https://www.googleapis.com/robot/v1/metadata/x509/banusportservice%40banusport.iam.gserviceaccount.com",sheet_id:"83843916",sheet_id_test:"824932524",googlesheet_id:"1PdOaTHFhQ2wzTzIGTyKB8qg-217s3En7E_clmeAJKv0"};t.default=function(){var e=0,t=0,n=localStorage.getItem("pass"),o=Object(m.g)(),b=Object(u.useState)(!1),E=Object(i.a)(b,2),O=E[0],j=E[1],g=Object(u.useState)([]),k=Object(i.a)(g,2),v=k[0],w=k[1],y=Object(u.useState)([]),_=Object(i.a)(y,2),C=_[0],S=_[1],z=Object(u.useState)([]),x=Object(i.a)(z,2),N=x[0],P=x[1],I=Object(u.useState)([]),T=Object(i.a)(I,2),R=T[0],M=T[1],D=Object(u.useState)({}),A=Object(i.a)(D,2),B=A[0],F=A[1],K=Object(u.useState)([]),G=Object(i.a)(K,2),J=G[0],H=G[1],W=Object(u.useState)([]),L=Object(i.a)(W,2),U=L[0],q=L[1],V=Object(u.useState)(10),Y=Object(i.a)(V,2),Q=Y[0],Z=Y[1],$=Object(u.useState)([]),X=Object(i.a)($,2),ee=X[0],te=X[1],ne=new d.GoogleSpreadsheet(h.googlesheet_id),ae=function(){var e=Object(l.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ne.useServiceAccountAuth({client_email:h.client_email,private_key:Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).PRIVATE_KEY});case 3:return e.next=5,ne.loadInfo();case 5:return t=ne.sheetsById[h.sheet_id],e.next=8,t.getRows();case 8:return e.abrupt("return",e.sent);case 11:e.prev=11,e.t0=e.catch(0),console.error("Error: ",e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();0===U.length&&ae().then((function(e){H(e),q(Object.keys(e).map((function(t,n){return{id:e[t].phone,idRow:n,name:e[t].name,phone:e[t].phone,photo:e[t].photo,note:e[t].note,pozitiile:e[t].pozitiile}})))}));var ce=Object(m.h)().search.match(/page=([0-9]+)/,""),oe=Number(ce&&ce[1]?ce[1]:1),re=Math.ceil(U.length/Q),le=Object(u.useState)(oe),ie=Object(i.a)(le,2),ue=ie[0],se=ie[1],me=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";te([].concat(Object(c.a)(ee),[{position:"top-right",autohide:"errors"===e?3e3:1e3,closeButton:!0,fade:!0,type:e,content:t}]))},pe=ee.reduce((function(e,t){return e[t.position]=e[t.position]||[],e[t.position].push(t),e}),{}),be=function(n){if(N.length<12)me("low");else{var a={},o=[],r=[];if("undefined"===typeof n||"position"===n){var l={1:[],2:[],3:[],4:[]},i={1:[],2:[],3:[],4:[]},u={1:[],2:[],3:[],4:[]},s={1:[],2:[],3:[],4:[]};U.forEach((function(e){if(N.includes(e.id)){a[e.id]=e;var t=e.pozitiile.split(".");switch(t[0]){case"1":l[1]=[].concat(Object(c.a)(l[1]),[e]);break;case"2":i[1]=[].concat(Object(c.a)(i[1]),[e]);break;case"3":u[1]=[].concat(Object(c.a)(u[1]),[e]);break;case"4":s[1]=[].concat(Object(c.a)(s[1]),[e])}switch(t[1]){case"1":l[2]=[].concat(Object(c.a)(l[2]),[e]);break;case"2":i[2]=[].concat(Object(c.a)(i[2]),[e]);break;case"3":u[2]=[].concat(Object(c.a)(u[2]),[e]);break;case"4":s[2]=[].concat(Object(c.a)(s[2]),[e])}switch(t[2]){case"1":l[3]=[].concat(Object(c.a)(l[3]),[e]);break;case"2":i[3]=[].concat(Object(c.a)(i[3]),[e]);break;case"3":u[3]=[].concat(Object(c.a)(u[3]),[e]);break;case"4":s[3]=[].concat(Object(c.a)(s[3]),[e])}switch(t[3]){case"1":l[4]=[].concat(Object(c.a)(l[4]),[e]);break;case"2":i[4]=[].concat(Object(c.a)(i[4]),[e]);break;case"3":u[4]=[].concat(Object(c.a)(u[4]),[e]);break;case"4":s[4]=[].concat(Object(c.a)(s[4]),[e])}}})),Object.keys(l).map((function(e){return l[e].sort((function(e,t){return parseInt(t.note,10)-parseInt(e.note,10)}))})),Object.keys(i).map((function(e){return i[e].sort((function(e,t){return parseInt(t.note,10)-parseInt(e.note,10)}))})),Object.keys(u).map((function(e){return u[e].sort((function(e,t){return parseInt(t.note,10)-parseInt(e.note,10)}))})),Object.keys(s).map((function(e){return s[e].sort((function(e,t){return parseInt(t.note,10)-parseInt(e.note,10)}))})),o=[].concat(Object(c.a)(l[1].filter((function(e,t){return t%2===0}))),Object(c.a)(i[1].filter((function(e,t){return t%2===0}))),Object(c.a)(u[1].filter((function(e,t){return t%2===0}))),Object(c.a)(s[1].filter((function(e,t){return t%2===0})))),r=[].concat(Object(c.a)(l[1].filter((function(e,t){return t%2!==0}))),Object(c.a)(i[1].filter((function(e,t){return t%2!==0}))),Object(c.a)(u[1].filter((function(e,t){return t%2!==0}))),Object(c.a)(s[1].filter((function(e,t){return t%2!==0})))),o.length!==r.length&&(r=[].concat(Object(c.a)(r),[o.slice(-1).pop()]),o.pop()),e=0,t=0}else if("top"===n){U.forEach((function(e){N.includes(e.id)&&(a[e.id]=e)})),Object.values(a).sort((function(e,t){return parseInt(t.note,10)-parseInt(e.note,10)})).forEach((function(e,t){t%2?r=[].concat(Object(c.a)(r),[e]):o=[].concat(Object(c.a)(o),[e])}))}else{var m=N.sort((function(){return.5-Math.random()}));o=m.slice(0,6),r=m.slice(6,12)}S([o,r]),j(!0)}},fe=function(e){switch(e){case"1":return"Att";case"2":return"Mid";case"3":return"Def";case"4":return"Gk";default:return"N/A"}},de=function(){var e=Object(l.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n={},e.t0=t.data.name,e.next="note"===e.t0?4:"phone"===e.t0?6:"pozitiile"===e.t0?8:10;break;case 4:return n.note=t.data.value,e.abrupt("break",11);case 6:return n.phone=t.data.value,e.abrupt("break",11);case 8:return n.pozitiile=t.data.value,e.abrupt("break",11);case 10:return e.abrupt("break",11);case 11:F(Object(a.a)(Object(a.a)({},B),n));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),he=function(){var e={};(B.note>10||B.note<0)&&(e.nota="Nota jucatorului nu corespunde intervalului [0 ... 10]"),null===B.phone.match(/^[0-9]*$/g)&&(e.telefon="Numarul de telefon al jucatorului poate fin doar din cifre");var t=B.pozitiile.split("."),n=t.includes("1")&&t.includes("2")&&t.includes("3")&&t.includes("4");if(4===t.length&&n||(e.pozitii='Pozitiile de joc nu corespund formatului "1.2.3.4"'),Object.keys(e).length)return me("errors",e),null;J[R[0]].note=B.note,J[R[0]].phone=B.phone,J[R[0]].pozitiile=B.pozitiile,J[R[0]].save();var c=U.slice();c[R[0]]=Object(a.a)(Object(a.a)({},c[R[0]]),{},{note:B.note,phone:B.phone,pozitiile:B.pozitiile,id:B.phone,idRow:R[0]}),q(c),M([]),F({})},Ee=function(e){var t=Object(i.a)(e,1)[0];if(null!==n&&"b43c25877cb11b88bcf6341b90fdccab"===f.a.MD5(n).toString())"undefined"!==typeof t?(M([t]),F(J[t])):(M([]),F({}));else{var a=prompt("Password:","");if(null===a||"b43c25877cb11b88bcf6341b90fdccab"!==f.a.MD5(a).toString())return me("pass"),null;localStorage.setItem("pass",a),"undefined"!==typeof t?(M([t]),F(J[t])):(M([]),F({}))}};return Object(u.useEffect)((function(){oe!==ue&&se(oe)}),[oe,ue,U]),s.a.createElement(p.O,null,U.length?s.a.createElement(p.k,{xl:12},s.a.createElement(p.g,null,s.a.createElement(p.i,null,s.a.createElement(p.O,{className:"align-items-center"},s.a.createElement(p.k,{col:"6",xl:"4",className:"mb-3 mb-xl-0"},"Players"),s.a.createElement(p.k,{col:"6",sm:"4",md:"4",xl:"4",className:"mb-3 mb-xl-0"},s.a.createElement(p.f,null,s.a.createElement(p.e,{color:"success",onClick:function(){return me("change")}},"Players list"),s.a.createElement(p.e,{color:"danger",onClick:function(){return P([])}},"Clear list"))),s.a.createElement(p.k,{col:"6",sm:"4",md:"4",xl:"4",className:"mb-3 mb-xl-0"},s.a.createElement(p.f,null,s.a.createElement(p.e,{color:"success",onClick:function(){N.length<12||C.length<2?me("noteams"):j(!0)}},"Show teams"),s.a.createElement(p.e,{color:"danger",onClick:function(){return be()}},"Generate teams"))))),s.a.createElement(p.h,null,s.a.createElement(p.o,{items:U,fields:[{key:"switch",label:"Participa",_style:{width:"1%"},sorter:!0},{key:"name",_classes:"font-weight-bold",_style:{width:"30%"}},{key:"phone",label:"Telefon"},{key:"note",label:"Nota"},{key:"pozitiile",label:"Post"},{key:"show_details",label:"",_style:{width:"1%"},filter:!1}],tableFilter:!0,itemsPerPageSelect:{label:"Jucaroti pe pagina",values:[10,20,50]},onPaginationChange:function(e){Z(e)},hover:!0,striped:!0,itemsPerPage:Q,activePage:ue,scopedSlots:{switch:function(e){return s.a.createElement("td",{className:"py-2"},s.a.createElement(p.Y,{size:"sm",className:"mx-1",shape:"pill",color:"success",variant:"opposite",labelOn:"\u2713",labelOff:"\u2715",onClick:function(){return t=e.id,void(12!==N.length||N.includes(t)?(N.includes(t)?P(Object(c.a)(N.filter((function(e){return e!==t})))):P([].concat(Object(c.a)(N),[t])),me("change")):me("full"));var t},checked:N.includes(e.id),onChange:function(){}}))},pozitiile:function(e){return s.a.createElement("td",{className:"py-2"},e.pozitiile.split(".").map((function(e){return fe(e)})).join("->"))},show_details:function(e,t){return s.a.createElement("td",{className:"py-2"},s.a.createElement(p.e,{color:"primary",variant:"outline",shape:"square",size:"sm",onClick:function(){!function(e){var t=v.indexOf(e),n=v.slice();-1!==t?n.splice(t,1):n=[].concat(Object(c.a)(v),[e]),w(n)}(t)}},v.includes(t)?"Hide":"Show"))},details:function(e,t){return s.a.createElement(p.l,{show:v.includes(t)},s.a.createElement(p.h,null,s.a.createElement(p.O,null,s.a.createElement(p.k,{lg:"8",className:"py-3"},s.a.createElement(p.D,null,s.a.createElement(p.E,null,s.a.createElement(p.F,{className:"bg-info text-white"},"Nota")),R.includes(e.idRow)?s.a.createElement(p.C,{value:B.note,name:"note",type:"number",min:0,max:10,onChange:function(t){return de({id:e.idRow,data:t.target})}}):s.a.createElement(p.C,{value:e.note,name:"note",disabled:!0})),s.a.createElement("br",null),s.a.createElement(p.D,null,s.a.createElement(p.E,null,s.a.createElement(p.F,{className:"bg-info text-white"},"Telefon")),R.includes(e.idRow)?s.a.createElement(p.C,{value:B.phone,type:"number",name:"phone",onChange:function(t){return de({id:e.idRow,data:t.target})}}):s.a.createElement(p.C,{value:e.phone,name:"phone",disabled:!0})),s.a.createElement("br",null),s.a.createElement(p.D,null,s.a.createElement(p.E,null,s.a.createElement(p.F,{className:"bg-info text-white"},"Pozitii de joc")),R.includes(e.idRow)?s.a.createElement(p.C,{value:B.pozitiile,name:"pozitiile",onChange:function(t){return de({id:e.idRow,data:t.target})}}):s.a.createElement(p.C,{value:e.pozitiile,name:"pozitiile",disabled:!0})),s.a.createElement(p.v,{className:"help-block"},"1: Att, 2: Mid, 3: Def, 4: Gk"),s.a.createElement("br",null),R.includes(e.idRow)?s.a.createElement(p.f,null,s.a.createElement(p.e,{color:"success",onClick:he},"Update"),s.a.createElement(p.e,{color:"danger",onClick:function(){return Ee([])}},"Cancel")):s.a.createElement(p.e,{color:"warning",onClick:function(){return Ee([e.idRow])}},"Edit")),s.a.createElement(p.k,{md:"4",className:"py-3"},"default"===e.photo?"No Image":s.a.createElement(p.j,{src:e.photo})))))}}}),s.a.createElement(p.M,{activePage:ue,onActivePageChange:function(e){oe!==e&&o.push("/players?page=".concat(e))},pages:re,align:"center"})))):"",Object.keys(pe).map((function(e){return s.a.createElement(p.cb,{position:e,key:"toaster"+e},pe[e].map((function(e,t){return s.a.createElement(p.Z,{key:"toast"+t,show:!0,autohide:e.autohide,fade:e.fade},s.a.createElement(p.bb,{closeButton:e.closeButton},["full","low","pass"].includes(e.type)?"Atentie!":"Jucatori"),s.a.createElement(p.ab,null,function(e){switch(e.type){case"full":return"Maximul jucatorilor este 12";case"low":return"Minimul de jucatorilor este 12";case"noteams":return"Generaza echipele!";case"pass":return"Wrong Password!!!";case"change":return Object.keys(U).map((function(e){return N.includes(U[e].id)?s.a.createElement("p",{key:U[e].id},s.a.createElement("b",null,"".concat(U[e].name))):""}));case"errors":return Object.keys(e.content).map((function(t){return s.a.createElement("p",{key:t},s.a.createElement("b",{style:{textTransform:"capitalize"}},"".concat(t),": ")," ","".concat(e.content[t]))}))}}(e)))})))})),s.a.createElement(p.H,{show:O,onClose:j},s.a.createElement(p.K,{closeButton:!0},s.a.createElement(p.L,null,"Modal title")),s.a.createElement(p.I,null,C.length<1?"No teams":s.a.createElement(p.O,null,s.a.createElement(p.k,{col:"6",className:"bg-info py-3"},C[0].map((function(t,n){return e+=parseInt(t.note,10),s.a.createElement("p",{key:t.id},"".concat(n+1,": "),s.a.createElement("b",null,"".concat(t.name))," : ",fe(t.pozitiile.split(".")[0])," : ",t.note)})),s.a.createElement("h3",null,"Suma: ",e),s.a.createElement("h5",null,"Media: ",(e/6).toFixed(2))),s.a.createElement(p.k,{col:"6",className:"bg-warning py-3"},C[1].map((function(e,n){return t+=parseInt(e.note,10),s.a.createElement("p",{key:e.id},"".concat(n+1,": "),s.a.createElement("b",null,"".concat(e.name))," : ",fe(e.pozitiile.split(".")[0])," : ",e.note)})),s.a.createElement("h4",null,"Suma: ",t),s.a.createElement("h5",null,"Media: ",(t/6).toFixed(2))))),s.a.createElement(p.J,null,s.a.createElement(p.f,null,s.a.createElement(p.e,{onClick:function(){return be("position")},color:"success"},"Teams by Position")," ",s.a.createElement(p.e,{onClick:function(){return be("top")},color:"danger"},"Teams by Top")),s.a.createElement(p.e,{color:"secondary",onClick:function(){return j(!1)}},"Close"))))}}}]);
//# sourceMappingURL=5.facd61f7.chunk.js.map